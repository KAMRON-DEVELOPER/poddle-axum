# Self-signed issuer for local development
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: selfsigned-ci
spec:
  selfSigned: {}
# ---
# apiVersion: cert-manager.io/v1
# kind: ClusterIssuer
# metadata:
#   name: vault-token-ci
# spec:
#   vault:
#     server: https://vault-active.vault.svc:8200
#     path: pki/sign/poddle-uz
#     auth:
#       tokenSecretRef:
#         name: vault-token
#         key: token
---
# Kubernetes auth
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: vault-k8s-ci
spec:
  vault:
    server: https://vault-active.vault.svc:8200
    path: pki/sign/poddle-uz
    # You must inject the Base64 of vault-root-ca-secret -> ca.crt here
    # caBundle: <base64 encoded CA Bundle PEM file>
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZBRENDQXVpZ0F3SUJBZ0lVUXZkTTFJVGFVNkZSUnA5SXVwSGZkZ3liSDJvd0RRWUpLb1pJaHZjTkFRRU4KQlFBd0dERVdNQlFHQTFVRUF4TU5kbUYxYkhRdGNtOXZkQzFqWVRBZUZ3MHlOakF4TVRVd09UVTBNelJhRncwegpOakF4TVRNd09UVTBNelJhTUJneEZqQVVCZ05WQkFNVERYWmhkV3gwTFhKdmIzUXRZMkV3Z2dJaU1BMEdDU3FHClNJYjNEUUVCQVFVQUE0SUNEd0F3Z2dJS0FvSUNBUURPY3JnVHYzUTlCc0JzYWdTbDdBbUlhNyt5OGlmeTlqNUEKL2orbmZURVBlWXgwWC85WW1sTWJxWnM2aW96ZGowTkF5eVNLYzdraXUrRGk0NTRFS2JHUlZreDVTemU4dzdxKwpmRS95S1BoTHlHT0tWWk4yQkhJY0JPTlEzbUZEMUFqcHRLdHNEVjZObTA0N1V2aUI3cGRVb283QXFRb0JSU2p2Ck5TRGxadUdZNmFWemk3TldSdWRoYTBtOVdFNGZwdkRZWVp6WW5WN0JZQm1HTkk2S2FNQm9tcG9hK1ZHaTNxbSsKbFU0Ykd1c21FM3VuRVRrTVpyL28zaUhrNy9zMXRnbUlxR1pheldQamZnYk5BSEdwcnI1QWRoMko5SFFwSGU0QQowWi8vMk03VDJUSzkxa0k3Qlg5U3dPcjY0U0FPelprV3dvc2dpQU5yTkEza1AzUGJHY3poam9OQ0N2VFdQTHpDClM2d0VCYVl6cWk3dGRkM2UxbzNBc3NKRXV4cVN1V1JUTVFlRFV3bFJDZ0Y1SWZ2dDBsTnl0aHRFSEhzK3l1TWYKcU5BcFdjaE5zOVc5RXlxR04vWUQwLzBYell4UkNhSndWRXhoSUNaVXhqblRuQUZFU3p6TmZSb0xXdm10eHhGbApzQmVmMDBGaWltSXVVc2FlS2R0M0ZMbjJLTDM0VHZEcm05SkV2OFU4eHhrNlR5VkdRdmM0a1hYMGNPZy9rOWIzCmxaa1dsT0Z0ay9vS2NjQVFnd1E4WENBZlJHMzR1Z2tPOGlGSi9PT1FubGpSUDl1L2RIejU2WWtsQWpLZHRpcWsKR3BlOEdodXNsZUk0V0dYOTBlVjFscTQxRXBpa0dzWnRRZ1NnMGR1NEd4S0Fud0g0NHEyYnJic1R2REM4QUZqYwp0bEV6TXh1YlZRSURBUUFCbzBJd1FEQU9CZ05WSFE4QkFmOEVCQU1DQXFRd0R3WURWUjBUQVFIL0JBVXdBd0VCCi96QWRCZ05WSFE0RUZnUVVKZGtscTJUbXY2aUdjc250a2QrdVVoS1lrYzR3RFFZSktvWklodmNOQVFFTkJRQUQKZ2dJQkFLaTVRK29WZk9TVkJxZUQ4RXVFdzZRaE9UWHhadkMySDV3TTlhdDlVQUl4OWtwNCtUNHpyQ2M0VndZZgpwOEZsZkpXUVRRZUZIUHcwTU8yY0JyTVFQeFR6NXM1dXdNNzR4RlBMbGdaM0ZSTkxUY3pqWEFlSjdqY2tWQm1DCmo3a0Y4SjluNnRzYkFabDVCVXZ6QWRMUFZQOEY5ZDFieUtFRXVtMjlyaFJGejdIY3k3SEdBaDdrdGM0YVFHQVgKVDdtL2RWbDBJUUlNcUlXUjZTY1RYSWQ4b21NVVo0Y3cycW9QT2ROeFdnWVJRZkxtOVpNck1GVUg3Z3pxL3FzYwowOTI2ajBFbnpTNm9oUlNEc3lDeEltN2puY0xmdzlhVVFlTDFBOTA2TUZPMUhISHYxaFJYemd4TVBRaVViY0hDCkgxYXVOUS9qWk55cWo1QVlacGc2TDBPcmppMmx2MjdsMzNWMTdDWGwwZW1WQjJDbjZFZjhqVlFwb2dEWW1TZ3EKNXViZi91UDJTcTdKNUpibHhYbzF6M3cwZWJ0UUc5NjlLTjB4bnh0S3JyRkxyMVJRWndPclpWQzZSdy82SjNLRQplZ2szdHhqTUVZWUFhbnFyTjFqSGVwbERnanpWdGtUQngyajNEeDV4ZEd1WDZlKzJBNVU0YU12QXd6bE4wMDcvCnI0SmtoVDVQbHlUTTZoT1MrRU5FbVFKaml3b0FrL1ZnVi9za0VVWlB6YW8rK1pkdmtBZzdWVGV0OEVtcE9OZjQKRkNFaVdUUmNScXNEanBqQWJHY2oxVDVZQm9aVGZxWEo3ZE56YWtoUllLejJ0c3lmRzBYTThWbmZZMUR4K1hnNgpvNGs3MGZRbVRENGwyOE5SeFpSVjNCQ3h2U0QwS3ZuMHN3Y3h1UFZmR0NEdnhkWUUKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
    # caBundleSecretRef:
    #   name: vault-root-ca-secret
    #   key: ca.crt
    auth:
      kubernetes:
        role: cert-manager
        mountPath: /v1/auth/kubernetes
        serviceAccountRef:
          name: cert-manager
---
# Let's Encrypt Staging
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-staging-ci
spec:
  acme:
    # Staging server for testing (higher rate limits)
    email: atajanovkamronbek2003@gmail.com
    server: https://acme-staging-v02.api.letsencrypt.org/directory
    privateKeySecretRef:
      name: letsencrypt-staging-private-key
    solvers:
      - http01:
          ingress:
            class: traefik
---
# Let's Encrypt Production
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  name: letsencrypt-production-ci
spec:
  acme:
    # Production server (strict rate limits)
    email: atajanovkamronbek2003@gmail.com
    server: https://acme-v02.api.letsencrypt.org/directory
    privateKeySecretRef:
      name: letsencrypt-production-private-key
    solvers:
      - http01:
          ingress:
            class: traefik
